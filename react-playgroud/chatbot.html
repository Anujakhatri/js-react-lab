<!DOCTYPE html>
<html>
  <head>
    <title>React Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>
  
    <script src="https://unpkg.com/supersimpledev@8.6.4/external-library.js"></script>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">
      function ChatInput(){
        const [inputText, setInputText] = React.useState(' ');
        function saveInputText(event){
          setInputText(event.target.value);
        }

        function sendMessage(){
          setChatMessages([
            ...chatMessages,
            {
              message: "test",
              sender: "user",
              id: crypto.randomUUID()
            }
            
          ]); 
        }
        return(
          <>
            <input
              placeholder ="Send a message to your chatbot" 
              size="30" 
              onChange={saveInputText}
            />
            <button
              onClick={sendMessage}
            > Send</button>
          </>  
        );
      }
      
      function ChatMessage({message,sender}){
        //const message = props.message;
        //const sender = props.sender;
        //const {message, sender} = props;

        /*if (sender === "bot"){
          return(
            <div>
              <img src= "robot.jpg" width = "50"/>
              {message}
              
            </div>
          )
        }
        */
        return(
          <div>
            {sender === "user" && (
              <img src= "user.png" width = "40"/>
            )}
            {message}
            {sender === "bot" && (
              <img src= "robot.jpg" width = "40"/>
            )}
            
          </div>
        );
      }
      function ChatMessages(){
        const [chatMessages, setChatMessages] = React.useState([{
          message: "hello chatbot",
          sender: "user",
          id: "1"
        },{
          message: "Hello! How can I help you today?",
          sender: "bot",
          id: "2"
        },{
          message: "I need help with my order.",
          sender: "user",
          id: "3"
        },{
          message: "What is the status of my order?",
          sender: "bot",
          id: "4"
        },{
          message: "can you get me today date?",
          sender : "user",
          id: "5"
        },{
          message: "Today is january 2nd 2026.",
          sender: "bot",
          id: "6"
        }]);
        // const [chatMessages, setChatMessages] = array;
        // const chatMessages = array[0];  //current state
        // const setChatMessages = array[1]; //updater function

        return(
          <>
            {chatMessages.map((chatMessage) => {
              return(
                <ChatMessage 
                  message = {chatMessage.message} 
                  sender = {chatMessage.sender} 
                  key = {chatMessage.id}
                />
              );
            })}
          </> 
        );
    }

      function App(){ 

          return(
          <>
            <ChatInput />
            <ChatMessages />
            
          </>  
        );
      }
      
      const container = document.querySelector('.js-container');
      
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html> 